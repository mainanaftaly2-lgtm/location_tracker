<script> location tracker 
  // Your configured backend URLs
  const SERVER_URL = "https://ebd6208e-3f5c-415f-9a2e-9606a3a0cd48-00-31gewkfu8l8o.kirk.replit.dev/track-location";
  const FETCH_URL = "https://ebd6208e-3f5c-415f-9a2e-9606a3a0cd48-00-31gewkfu8l8o.kirk.replit.dev/locations";

  // Send location data to backend
  function sendLocation(lat, lng) {
    fetch(SERVER_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ lat, lng })
    })
    .then(res => res.json())
    .then(data => console.log("Location sent:", data))
    .catch(err => console.error("Error sending location:", err));
  }

  // Get current user location
  function trackUser() {
    if (!navigator.geolocation) {
      console.error("Geolocation not supported by this browser.");
      return;
    }

    navigator.geolocation.getCurrentPosition(
      position => {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;
        console.log("Current location:", { lat, lng });
        sendLocation(lat, lng);
      },
      err => console.error("Geolocation error:", err)
    );
  }

  // Fetch all stored locations from backend
  function fetchLocations() {
    fetch(FETCH_URL)
      .then(res => res.json())
      .then(data => console.log("All stored locations:", data))
      .catch(err => console.error("Error fetching locations:", err));
  }

  // Track user every 10 seconds
  setInterval(trackUser, 10000);

  // Fetch all locations every 30 seconds
  setInterval(fetchLocations, 30000);

  // Initial calls
  trackUser();
  fetchLocations();
</script>
